// Automatically generated by xdrgen
// DO NOT EDIT or your changes may be overwritten

package com.stellar.sdk.xdr

/**
 * XDR Source:
 * struct TransactionMetaV2
 * {
 *     LedgerEntryChanges txChangesBefore; // tx level changes before operations
 *                                         // are applied if any
 *     OperationMeta operations<>;         // meta for each operation
 *     LedgerEntryChanges txChangesAfter;  // tx level changes after operations are
 *                                         // applied if any
 * };
 */
data class TransactionMetaV2Xdr(
  /** tx level changes before operations */
  val txChangesBefore: LedgerEntryChangesXdr,
  val operations: List<OperationMetaXdr>,
  /** tx level changes after operations are */
  val txChangesAfter: LedgerEntryChangesXdr
) {
  companion object {

    fun decode(reader: XdrReader): TransactionMetaV2Xdr {
      val txChangesBefore = LedgerEntryChangesXdr.decode(reader)
      val operations = List(reader.readInt()) { OperationMetaXdr.decode(reader) }
      val txChangesAfter = LedgerEntryChangesXdr.decode(reader)
      return TransactionMetaV2Xdr(txChangesBefore, operations, txChangesAfter)
    }
  }

  fun encode(writer: XdrWriter) {
    txChangesBefore.encode(writer)
    writer.writeInt(operations.size)
    operations.forEach { item ->
      item.encode(writer)
    }
    txChangesAfter.encode(writer)
  }
}
